
import numpy as np
import redis
import json
import cv2
import matplotlib.pyplot as plt
from keras.models import load_model
#import pandas as pd


import time

plt.close("all")

BASE_SIZE = 128				# Size di input della rete
SIZE=700					# Size del canvas frontend
LW=2						# Line Width

host = "localhost"
port = 6379

r = redis.Redis(
	host=host,
	port=port
	)

def load(times):
	pts = {"id": 5, "payload": [{"points": [87.81820678710938,141.76136779785156,87.81820678710938,142.76136779785156,86.81820678710938,145.76136779785156,85.81820678710938,148.76136779785156,85.81820678710938,151.76136779785156,84.81820678710938,156.76136779785156,83.81820678710938,158.76136779785156,82.81820678710938,160.76136779785156,82.81820678710938,162.76136779785156,81.81820678710938,165.76136779785156,80.81820678710938,169.76136779785156,77.81820678710938,178.76136779785156,76.81820678710938,182.76136779785156,76.81820678710938,187.76136779785156,76.81820678710938,191.76136779785156,76.81820678710938,195.76136779785156,75.81820678710938,198.76136779785156,74.81820678710938,201.76136779785156,74.81820678710938,206.76136779785156,74.81820678710938,211.76136779785156,74.81820678710938,216.76136779785156,74.81820678710938,221.76136779785156,74.81820678710938,226.76136779785156,74.81820678710938,230.76136779785156,74.81820678710938,234.76136779785156,74.81820678710938,236.76136779785156,75.81820678710938,239.76136779785156,75.81820678710938,243.76136779785156,75.81820678710938,245.76136779785156,75.81820678710938,247.76136779785156,75.81820678710938,250.76136779785156,75.81820678710938,254.76136779785156,75.81820678710938,256.76136779785156,76.81820678710938,260.76136779785156,76.81820678710938,262.76136779785156,76.81820678710938,265.76136779785156,76.81820678710938,267.76136779785156,76.81820678710938,269.76136779785156,76.81820678710938,271.76136779785156,76.81820678710938,273.76136779785156,76.81820678710938,275.76136779785156,76.81820678710938,277.76136779785156,76.81820678710938,282.76136779785156,76.81820678710938,285.76136779785156,76.81820678710938,288.76136779785156,76.81820678710938,291.76136779785156,76.81820678710938,294.76136779785156,76.81820678710938,296.76136779785156,76.81820678710938,297.76136779785156,76.81820678710938,299.76136779785156,76.81820678710938,302.76136779785156,76.81820678710938,305.76136779785156,75.81820678710938,307.76136779785156,72.81820678710938,312.76136779785156,70.81820678710938,317.76136779785156,67.81820678710938,323.76136779785156,65.81820678710938,328.76136779785156,64.81820678710938,330.76136779785156,63.818206787109375,331.76136779785156,63.818206787109375,332.76136779785156,62.818206787109375,333.76136779785156,62.818206787109375,334.76136779785156,62.818206787109375,335.76136779785156,61.818206787109375,338.76136779785156,61.818206787109375,342.76136779785156,59.818206787109375,346.76136779785156,58.818206787109375,352.76136779785156,57.818206787109375,355.76136779785156,56.818206787109375,357.76136779785156,56.818206787109375,360.76136779785156,56.818206787109375,363.76136779785156,56.818206787109375,365.76136779785156,56.818206787109375,365.76136779785156,55.818206787109375,367.76136779785156,55.818206787109375,368.76136779785156,54.818206787109375,371.76136779785156,53.818206787109375,376.76136779785156,51.818206787109375,382.76136779785156,50.818206787109375,385.76136779785156,49.818206787109375,391.76136779785156,47.818206787109375,395.76136779785156,47.818206787109375,396.76136779785156,47.818206787109375,397.76136779785156,50.818206787109375,397.76136779785156,52.818206787109375,397.76136779785156,56.818206787109375,397.76136779785156,63.818206787109375,397.76136779785156,68.81820678710938,399.76136779785156,72.81820678710938,400.76136779785156,76.81820678710938,402.76136779785156,81.81820678710938,403.76136779785156,86.81820678710938,404.76136779785156,91.81820678710938,405.76136779785156,97.81820678710938,407.76136779785156,109.81820678710938,409.76136779785156,116.81820678710938,410.76136779785156,124.81820678710938,412.76136779785156,133.81820678710938,413.76136779785156,140.81820678710938,415.76136779785156,147.81820678710938,416.76136779785156,154.81820678710938,416.76136779785156,161.81820678710938,416.76136779785156,172.81820678710938,418.76136779785156,180.81820678710938,419.76136779785156,185.81820678710938,419.76136779785156,195.81820678710938,420.76136779785156,203.81820678710938,422.76136779785156,212.81820678710938,423.76136779785156,220.81820678710938,424.76136779785156,239.81820678710938,427.76136779785156,248.81820678710938,428.76136779785156,257.8182067871094,429.76136779785156,266.8182067871094,430.76136779785156,276.8182067871094,430.76136779785156,285.8182067871094,430.76136779785156,292.8182067871094,431.76136779785156,300.8182067871094,431.76136779785156,314.8182067871094,431.76136779785156,322.8182067871094,431.76136779785156,329.8182067871094,431.76136779785156,338.8182067871094,430.76136779785156,346.8182067871094,429.76136779785156,356.8182067871094,429.76136779785156,365.8182067871094,428.76136779785156,374.8182067871094,428.76136779785156,386.8182067871094,428.76136779785156,392.8182067871094,427.76136779785156,396.8182067871094,427.76136779785156,402.8182067871094,427.76136779785156,406.8182067871094,426.76136779785156,410.8182067871094,426.76136779785156,414.8182067871094,426.76136779785156,420.8182067871094,426.76136779785156,426.8182067871094,426.76136779785156,430.8182067871094,425.76136779785156,436.8182067871094,425.76136779785156,440.8182067871094,425.76136779785156,446.8182067871094,425.76136779785156,453.8182067871094,425.76136779785156,458.8182067871094,425.76136779785156,467.8182067871094,425.76136779785156,472.8182067871094,425.76136779785156,477.8182067871094,425.76136779785156,482.8182067871094,425.76136779785156,485.8182067871094,425.76136779785156,488.8182067871094,425.76136779785156,491.8182067871094,425.76136779785156,494.8182067871094,424.76136779785156,498.8182067871094,424.76136779785156,502.8182067871094,423.76136779785156,505.8182067871094,423.76136779785156,506.8182067871094,423.76136779785156,508.8182067871094,423.76136779785156,510.8182067871094,423.76136779785156,512.8182067871094,423.76136779785156,515.8182067871094,423.76136779785156,516.8182067871094,423.76136779785156,518.8182067871094,423.76136779785156,520.8182067871094,422.76136779785156,523.8182067871094,422.76136779785156,526.8182067871094,422.76136779785156,529.8182067871094,422.76136779785156,532.8182067871094,421.76136779785156,537.8182067871094,421.76136779785156,541.8182067871094,420.76136779785156,545.8182067871094,420.76136779785156,548.8182067871094,420.76136779785156,551.8182067871094,420.76136779785156,555.8182067871094,420.76136779785156,558.8182067871094,420.76136779785156,561.8182067871094,420.76136779785156,563.8182067871094,420.76136779785156,564.8182067871094,420.76136779785156,565.8182067871094,420.76136779785156,565.8182067871094,420.76136779785156,566.8182067871094,420.76136779785156,567.8182067871094,420.76136779785156,569.8182067871094,420.76136779785156,572.8182067871094,419.76136779785156,574.8182067871094,418.76136779785156,575.8182067871094,418.76136779785156,577.8182067871094,417.76136779785156,581.8182067871094,416.76136779785156,583.8182067871094,416.76136779785156,585.8182067871094,415.76136779785156,587.8182067871094,415.76136779785156,589.8182067871094,414.76136779785156,591.8182067871094,413.76136779785156,593.8182067871094,412.76136779785156,595.8182067871094,412.76136779785156,595.8182067871094,412.76136779785156,596.8182067871094,412.76136779785156,598.8182067871094,411.76136779785156,599.8182067871094,411.76136779785156,600.8182067871094,411.76136779785156,602.8182067871094,410.76136779785156,604.8182067871094,410.76136779785156,605.8182067871094,410.76136779785156,606.8182067871094,410.76136779785156,607.8182067871094,410.76136779785156,608.8182067871094,410.76136779785156,609.8182067871094,410.76136779785156,610.8182067871094,410.76136779785156,610.8182067871094,409.76136779785156,610.8182067871094,408.76136779785156,610.8182067871094,407.76136779785156,610.8182067871094,406.76136779785156,611.8182067871094,406.76136779785156,611.8182067871094,405.76136779785156,611.8182067871094,405.76136779785156,611.8182067871094,403.76136779785156,612.8182067871094,400.76136779785156,612.8182067871094,397.76136779785156,613.8182067871094,394.76136779785156,614.8182067871094,386.76136779785156,614.8182067871094,380.76136779785156,615.8182067871094,374.76136779785156,615.8182067871094,367.76136779785156,616.8182067871094,360.76136779785156,617.8182067871094,352.76136779785156,618.8182067871094,344.76136779785156,618.8182067871094,336.76136779785156,619.8182067871094,325.76136779785156,620.8182067871094,318.76136779785156,622.8182067871094,312.76136779785156,623.8182067871094,307.76136779785156,625.8182067871094,299.76136779785156,625.8182067871094,295.76136779785156,627.8182067871094,289.76136779785156,630.8182067871094,283.76136779785156,631.8182067871094,278.76136779785156,632.8182067871094,276.76136779785156,633.8182067871094,272.76136779785156,633.8182067871094,268.76136779785156,635.8182067871094,264.76136779785156,635.8182067871094,259.76136779785156,636.8182067871094,255.76136779785156,637.8182067871094,247.76136779785156,637.8182067871094,243.76136779785156,637.8182067871094,239.76136779785156,637.8182067871094,234.76136779785156,637.8182067871094,230.76136779785156,637.8182067871094,226.76136779785156,637.8182067871094,223.76136779785156,637.8182067871094,221.76136779785156,637.8182067871094,217.76136779785156,637.8182067871094,216.76136779785156,637.8182067871094,216.76136779785156,637.8182067871094,215.76136779785156,637.8182067871094,214.76136779785156,636.8182067871094,211.76136779785156,635.8182067871094,208.76136779785156,635.8182067871094,205.76136779785156,635.8182067871094,200.76136779785156,635.8182067871094,195.76136779785156,635.8182067871094,191.76136779785156,635.8182067871094,187.76136779785156,635.8182067871094,185.76136779785156,634.8182067871094,181.76136779785156,633.8182067871094,178.76136779785156,633.8182067871094,176.76136779785156,633.8182067871094,175.76136779785156,633.8182067871094,174.76136779785156,633.8182067871094,172.76136779785156,633.8182067871094,170.76136779785156,633.8182067871094,167.76136779785156,633.8182067871094,165.76136779785156,633.8182067871094,163.76136779785156,633.8182067871094,160.76136779785156,634.8182067871094,157.76136779785156,635.8182067871094,154.76136779785156,635.8182067871094,151.76136779785156,635.8182067871094,147.76136779785156,637.8182067871094,142.76136779785156,637.8182067871094,140.76136779785156,637.8182067871094,138.76136779785156,637.8182067871094,136.76136779785156,637.8182067871094,135.76136779785156,636.8182067871094,135.76136779785156,634.8182067871094,135.76136779785156,631.8182067871094,136.76136779785156,627.8182067871094,137.76136779785156,622.8182067871094,138.76136779785156,615.8182067871094,139.76136779785156,605.8182067871094,142.76136779785156,600.8182067871094,142.76136779785156,594.8182067871094,142.76136779785156,585.8182067871094,145.76136779785156,576.8182067871094,145.76136779785156,568.8182067871094,145.76136779785156,558.8182067871094,146.76136779785156,547.8182067871094,146.76136779785156,536.8182067871094,146.76136779785156,526.8182067871094,146.76136779785156,518.8182067871094,146.76136779785156,510.8182067871094,146.76136779785156,503.8182067871094,146.76136779785156,496.8182067871094,146.76136779785156,489.8182067871094,146.76136779785156,479.8182067871094,146.76136779785156,474.8182067871094,146.76136779785156,468.8182067871094,146.76136779785156,464.8182067871094,147.76136779785156,459.8182067871094,147.76136779785156,455.8182067871094,147.76136779785156,452.8182067871094,147.76136779785156,449.8182067871094,147.76136779785156,444.8182067871094,147.76136779785156,442.8182067871094,147.76136779785156,439.8182067871094,147.76136779785156,436.8182067871094,147.76136779785156,433.8182067871094,147.76136779785156,429.8182067871094,147.76136779785156,425.8182067871094,147.76136779785156,417.8182067871094,147.76136779785156,411.8182067871094,147.76136779785156,406.8182067871094,147.76136779785156,400.8182067871094,147.76136779785156,394.8182067871094,147.76136779785156,387.8182067871094,147.76136779785156,380.8182067871094,147.76136779785156,372.8182067871094,147.76136779785156,357.8182067871094,147.76136779785156,348.8182067871094,146.76136779785156,340.8182067871094,146.76136779785156,330.8182067871094,145.76136779785156,322.8182067871094,145.76136779785156,314.8182067871094,145.76136779785156,304.8182067871094,145.76136779785156,295.8182067871094,144.76136779785156,280.8182067871094,143.76136779785156,273.8182067871094,143.76136779785156,264.8182067871094,142.76136779785156,256.8182067871094,142.76136779785156,249.81820678710938,142.76136779785156,242.81820678710938,141.76136779785156,237.81820678710938,141.76136779785156,227.81820678710938,141.76136779785156,223.81820678710938,141.76136779785156,217.81820678710938,141.76136779785156,214.81820678710938,141.76136779785156,209.81820678710938,141.76136779785156,204.81820678710938,141.76136779785156,200.81820678710938,141.76136779785156,196.81820678710938,141.76136779785156,190.81820678710938,141.76136779785156,186.81820678710938,140.76136779785156,184.81820678710938,140.76136779785156,180.81820678710938,140.76136779785156,176.81820678710938,140.76136779785156,173.81820678710938,140.76136779785156,168.81820678710938,139.76136779785156,164.81820678710938,138.76136779785156,154.81820678710938,138.76136779785156,149.81820678710938,137.76136779785156,144.81820678710938,135.76136779785156,138.81820678710938,135.76136779785156,135.81820678710938,135.76136779785156,132.81820678710938,134.76136779785156,128.81820678710938,134.76136779785156,123.81820678710938,132.76136779785156,119.81820678710938,131.76136779785156,116.81820678710938,131.76136779785156,114.81820678710938,131.76136779785156,111.81820678710938,130.76136779785156,109.81820678710938,130.76136779785156,107.81820678710938,130.76136779785156,106.81820678710938,130.76136779785156,103.81820678710938,130.76136779785156,101.81820678710938,130.76136779785156,99.81820678710938,130.76136779785156,97.81820678710938,130.76136779785156,95.81820678710938,130.76136779785156,93.81820678710938,129.76136779785156,91.81820678710938,129.76136779785156,89.81820678710938,129.76136779785156,87.81820678710938,128.76136779785156,86.81820678710938,128.76136779785156,86.81820678710938,128.76136779785156,85.81820678710938,128.76136779785156,84.81820678710938,128.76136779785156,82.81820678710938,128.76136779785156,81.81820678710938,128.76136779785156]},{"points": [102.81820678710938,318.76136779785156,103.81820678710938,318.76136779785156,104.81820678710938,318.76136779785156,105.81820678710938,318.76136779785156,106.81820678710938,318.76136779785156,107.81820678710938,318.76136779785156,109.81820678710938,317.76136779785156,111.81820678710938,317.76136779785156,113.81820678710938,317.76136779785156,115.81820678710938,317.76136779785156,116.81820678710938,316.76136779785156,118.81820678710938,316.76136779785156,119.81820678710938,316.76136779785156,120.81820678710938,316.76136779785156,122.81820678710938,316.76136779785156,123.81820678710938,316.76136779785156,125.81820678710938,316.76136779785156,126.81820678710938,315.76136779785156,126.81820678710938,314.76136779785156,127.81820678710938,314.76136779785156,128.81820678710938,314.76136779785156,130.81820678710938,313.76136779785156,131.81820678710938,313.76136779785156,132.81820678710938,312.76136779785156,134.81820678710938,311.76136779785156,135.81820678710938,311.76136779785156,135.81820678710938,310.76136779785156,136.81820678710938,309.76136779785156,137.81820678710938,308.76136779785156,139.81820678710938,307.76136779785156,141.81820678710938,306.76136779785156,142.81820678710938,305.76136779785156,145.81820678710938,303.76136779785156,145.81820678710938,303.76136779785156,145.81820678710938,302.76136779785156,146.81820678710938,302.76136779785156,147.81820678710938,301.76136779785156,148.81820678710938,301.76136779785156,148.81820678710938,300.76136779785156,149.81820678710938,299.76136779785156,150.81820678710938,298.76136779785156,152.81820678710938,297.76136779785156,152.81820678710938,296.76136779785156,153.81820678710938,296.76136779785156,154.81820678710938,295.76136779785156,155.81820678710938,294.76136779785156,155.81820678710938,293.76136779785156,156.81820678710938,292.76136779785156,157.81820678710938,291.76136779785156,159.81820678710938,289.76136779785156,160.81820678710938,287.76136779785156,162.81820678710938,286.76136779785156,162.81820678710938,285.76136779785156,162.81820678710938,284.76136779785156,163.81820678710938,283.76136779785156,163.81820678710938,282.76136779785156,163.81820678710938,280.76136779785156,163.81820678710938,279.76136779785156,163.81820678710938,277.76136779785156,163.81820678710938,276.76136779785156,162.81820678710938,275.76136779785156,162.81820678710938,273.76136779785156,161.81820678710938,271.76136779785156,160.81820678710938,270.76136779785156,158.81820678710938,268.76136779785156,157.81820678710938,267.76136779785156,156.81820678710938,266.76136779785156,155.81820678710938,265.76136779785156,155.81820678710938,264.76136779785156,154.81820678710938,261.76136779785156,153.81820678710938,259.76136779785156,152.81820678710938,257.76136779785156,150.81820678710938,255.76136779785156,150.81820678710938,253.76136779785156,149.81820678710938,252.76136779785156,148.81820678710938,251.76136779785156,147.81820678710938,251.76136779785156,147.81820678710938,250.76136779785156,145.81820678710938,250.76136779785156,145.81820678710938,250.76136779785156,144.81820678710938,250.76136779785156,143.81820678710938,250.76136779785156,141.81820678710938,250.76136779785156,139.81820678710938,250.76136779785156,138.81820678710938,249.76136779785156,136.81820678710938,248.76136779785156,134.81820678710938,247.76136779785156,133.81820678710938,246.76136779785156,131.81820678710938,245.76136779785156,128.81820678710938,245.76136779785156,127.81820678710938,244.76136779785156,126.81820678710938,243.76136779785156,125.81820678710938,243.76136779785156,124.81820678710938,242.76136779785156,123.81820678710938,241.76136779785156,123.81820678710938,239.76136779785156,121.81820678710938,239.76136779785156,121.81820678710938,237.76136779785156,120.81820678710938,236.76136779785156,119.81820678710938,236.76136779785156,118.81820678710938,234.76136779785156,117.81820678710938,231.76136779785156,116.81820678710938,230.76136779785156,116.81820678710938,228.76136779785156,114.81820678710938,226.76136779785156,113.81820678710938,223.76136779785156,111.81820678710938,221.76136779785156,110.81820678710938,219.76136779785156,108.81820678710938,217.76136779785156,107.81820678710938,215.76136779785156,106.81820678710938,214.76136779785156,106.81820678710938,211.76136779785156,106.81820678710938,210.76136779785156,105.81820678710938,209.76136779785156,105.81820678710938,207.76136779785156,105.81820678710938,206.76136779785156,105.81820678710938,206.76136779785156,105.81820678710938,205.76136779785156,105.81820678710938,204.76136779785156,105.81820678710938,203.76136779785156,105.81820678710938,202.76136779785156,105.81820678710938,201.76136779785156,106.81820678710938,200.76136779785156,107.81820678710938,199.76136779785156,108.81820678710938,197.76136779785156,109.81820678710938,196.76136779785156,111.81820678710938,196.76136779785156,112.81820678710938,196.76136779785156,113.81820678710938,195.76136779785156,116.81820678710938,195.76136779785156,116.81820678710938,193.76136779785156,119.81820678710938,192.76136779785156,121.81820678710938,191.76136779785156,124.81820678710938,190.76136779785156,126.81820678710938,189.76136779785156,126.81820678710938,189.76136779785156,128.81820678710938,189.76136779785156,129.81820678710938,189.76136779785156,131.81820678710938,187.76136779785156,133.81820678710938,187.76136779785156,134.81820678710938,187.76136779785156,135.81820678710938,187.76136779785156,136.81820678710938,187.76136779785156,139.81820678710938,187.76136779785156,139.81820678710938,186.76136779785156,141.81820678710938,186.76136779785156,142.81820678710938,186.76136779785156,144.81820678710938,186.76136779785156,145.81820678710938,186.76136779785156,147.81820678710938,186.76136779785156,148.81820678710938,186.76136779785156,149.81820678710938,185.76136779785156,151.81820678710938,185.76136779785156,153.81820678710938,185.76136779785156,154.81820678710938,185.76136779785156,155.81820678710938,185.76136779785156,156.81820678710938,185.76136779785156,157.81820678710938,185.76136779785156,158.81820678710938,185.76136779785156,159.81820678710938,185.76136779785156,160.81820678710938,185.76136779785156,161.81820678710938,185.76136779785156,162.81820678710938,185.76136779785156,163.81820678710938,185.76136779785156]},{"points": [229.81820678710938,188.76136779785156,227.81820678710938,188.76136779785156,226.81820678710938,188.76136779785156,225.81820678710938,188.76136779785156,224.81820678710938,188.76136779785156,222.81820678710938,188.76136779785156,221.81820678710938,187.76136779785156,219.81820678710938,187.76136779785156,218.81820678710938,187.76136779785156,217.81820678710938,187.76136779785156,216.81820678710938,187.76136779785156,215.81820678710938,187.76136779785156,214.81820678710938,187.76136779785156,213.81820678710938,187.76136779785156,212.81820678710938,187.76136779785156,211.81820678710938,187.76136779785156,210.81820678710938,187.76136779785156,208.81820678710938,188.76136779785156,206.81820678710938,188.76136779785156,206.81820678710938,189.76136779785156,205.81820678710938,189.76136779785156,204.81820678710938,189.76136779785156,203.81820678710938,190.76136779785156,201.81820678710938,191.76136779785156,200.81820678710938,191.76136779785156,199.81820678710938,192.76136779785156,198.81820678710938,193.76136779785156,198.81820678710938,194.76136779785156,196.81820678710938,194.76136779785156,195.81820678710938,196.76136779785156,195.81820678710938,196.76136779785156,195.81820678710938,196.76136779785156,194.81820678710938,196.76136779785156,194.81820678710938,197.76136779785156,194.81820678710938,198.76136779785156,194.81820678710938,199.76136779785156,193.81820678710938,201.76136779785156,192.81820678710938,203.76136779785156,192.81820678710938,205.76136779785156,190.81820678710938,207.76136779785156,189.81820678710938,209.76136779785156,188.81820678710938,212.76136779785156,186.81820678710938,216.76136779785156,185.81820678710938,218.76136779785156,185.81820678710938,220.76136779785156,185.81820678710938,221.76136779785156,183.81820678710938,224.76136779785156,183.81820678710938,225.76136779785156,182.81820678710938,226.76136779785156,181.81820678710938,227.76136779785156,181.81820678710938,228.76136779785156,181.81820678710938,229.76136779785156,181.81820678710938,230.76136779785156,180.81820678710938,231.76136779785156,180.81820678710938,233.76136779785156,178.81820678710938,235.76136779785156,176.81820678710938,238.76136779785156,175.81820678710938,241.76136779785156,174.81820678710938,246.76136779785156,172.81820678710938,249.76136779785156,171.81820678710938,252.76136779785156,171.81820678710938,256.76136779785156,170.81820678710938,257.76136779785156,170.81820678710938,259.76136779785156,170.81820678710938,260.76136779785156,170.81820678710938,261.76136779785156,170.81820678710938,262.76136779785156,170.81820678710938,263.76136779785156,170.81820678710938,264.76136779785156,170.81820678710938,265.76136779785156,170.81820678710938,266.76136779785156,171.81820678710938,266.76136779785156,171.81820678710938,267.76136779785156,172.81820678710938,268.76136779785156,173.81820678710938,269.76136779785156,173.81820678710938,270.76136779785156,173.81820678710938,272.76136779785156,174.81820678710938,273.76136779785156,174.81820678710938,275.76136779785156,175.81820678710938,276.76136779785156,175.81820678710938,279.76136779785156,176.81820678710938,281.76136779785156,177.81820678710938,283.76136779785156,177.81820678710938,284.76136779785156,178.81820678710938,286.76136779785156,178.81820678710938,286.76136779785156,179.81820678710938,287.76136779785156,179.81820678710938,289.76136779785156,180.81820678710938,290.76136779785156,180.81820678710938,291.76136779785156,181.81820678710938,293.76136779785156,181.81820678710938,294.76136779785156,182.81820678710938,295.76136779785156,183.81820678710938,296.76136779785156,184.81820678710938,298.76136779785156,185.81820678710938,299.76136779785156,185.81820678710938,300.76136779785156,185.81820678710938,300.76136779785156,185.81820678710938,301.76136779785156,186.81820678710938,302.76136779785156,186.81820678710938,303.76136779785156,187.81820678710938,304.76136779785156,188.81820678710938,304.76136779785156,189.81820678710938,306.76136779785156,189.81820678710938,306.76136779785156,189.81820678710938,307.76136779785156,190.81820678710938,307.76136779785156,190.81820678710938,308.76136779785156,191.81820678710938,308.76136779785156,192.81820678710938,308.76136779785156,193.81820678710938,308.76136779785156,193.81820678710938,309.76136779785156,195.81820678710938,309.76136779785156,195.81820678710938,309.76136779785156,197.81820678710938,310.76136779785156,198.81820678710938,310.76136779785156,200.81820678710938,310.76136779785156,202.81820678710938,310.76136779785156,204.81820678710938,310.76136779785156,205.81820678710938,310.76136779785156,207.81820678710938,310.76136779785156,209.81820678710938,310.76136779785156,210.81820678710938,310.76136779785156,211.81820678710938,311.76136779785156,212.81820678710938,311.76136779785156]},{"points": [266.8182067871094,191.76136779785156,266.8182067871094,192.76136779785156,265.8182067871094,195.76136779785156,263.8182067871094,203.76136779785156,263.8182067871094,206.76136779785156,263.8182067871094,210.76136779785156,263.8182067871094,215.76136779785156,263.8182067871094,217.76136779785156,262.8182067871094,221.76136779785156,262.8182067871094,224.76136779785156,262.8182067871094,227.76136779785156,261.8182067871094,231.76136779785156,261.8182067871094,235.76136779785156,260.8182067871094,240.76136779785156,260.8182067871094,244.76136779785156,259.8182067871094,251.76136779785156,259.8182067871094,255.76136779785156,259.8182067871094,260.76136779785156,259.8182067871094,264.76136779785156,259.8182067871094,267.76136779785156,259.8182067871094,270.76136779785156,259.8182067871094,275.76136779785156,259.8182067871094,277.76136779785156,259.8182067871094,281.76136779785156,259.8182067871094,283.76136779785156,259.8182067871094,286.76136779785156,259.8182067871094,288.76136779785156,259.8182067871094,289.76136779785156,259.8182067871094,291.76136779785156,259.8182067871094,292.76136779785156,259.8182067871094,294.76136779785156,259.8182067871094,296.76136779785156,259.8182067871094,298.76136779785156,259.8182067871094,300.76136779785156,259.8182067871094,302.76136779785156,260.8182067871094,306.76136779785156,261.8182067871094,308.76136779785156,261.8182067871094,309.76136779785156,261.8182067871094,310.76136779785156]},{"points": [306.8182067871094,189.76136779785156,306.8182067871094,190.76136779785156,306.8182067871094,192.76136779785156,306.8182067871094,195.76136779785156,306.8182067871094,197.76136779785156,306.8182067871094,200.76136779785156,306.8182067871094,204.76136779785156,306.8182067871094,208.76136779785156,306.8182067871094,214.76136779785156,306.8182067871094,217.76136779785156,306.8182067871094,222.76136779785156,306.8182067871094,230.76136779785156,306.8182067871094,236.76136779785156,306.8182067871094,240.76136779785156,306.8182067871094,246.76136779785156,306.8182067871094,249.76136779785156,306.8182067871094,254.76136779785156,306.8182067871094,259.76136779785156,306.8182067871094,263.76136779785156,305.8182067871094,271.76136779785156,305.8182067871094,275.76136779785156,304.8182067871094,278.76136779785156,304.8182067871094,281.76136779785156,304.8182067871094,282.76136779785156,304.8182067871094,284.76136779785156,304.8182067871094,285.76136779785156,303.8182067871094,286.76136779785156,303.8182067871094,286.76136779785156,303.8182067871094,287.76136779785156,302.8182067871094,288.76136779785156,302.8182067871094,289.76136779785156,302.8182067871094,290.76136779785156,302.8182067871094,291.76136779785156,301.8182067871094,293.76136779785156,301.8182067871094,294.76136779785156,301.8182067871094,295.76136779785156]},{"points": [266.8182067871094,244.76136779785156,266.8182067871094,244.76136779785156,269.8182067871094,244.76136779785156,272.8182067871094,244.76136779785156,274.8182067871094,244.76136779785156,276.8182067871094,244.76136779785156,277.8182067871094,244.76136779785156,280.8182067871094,245.76136779785156,286.8182067871094,245.76136779785156,287.8182067871094,245.76136779785156,290.8182067871094,246.76136779785156,292.8182067871094,246.76136779785156,293.8182067871094,246.76136779785156,295.8182067871094,246.76136779785156,296.8182067871094,246.76136779785156,296.8182067871094,246.76136779785156]},{"points": [358.8182067871094,296.76136779785156,359.8182067871094,296.76136779785156,361.8182067871094,296.76136779785156,363.8182067871094,295.76136779785156,364.8182067871094,294.76136779785156,365.8182067871094,294.76136779785156,366.8182067871094,293.76136779785156,367.8182067871094,292.76136779785156,369.8182067871094,291.76136779785156,372.8182067871094,289.76136779785156,374.8182067871094,287.76136779785156,376.8182067871094,286.76136779785156,376.8182067871094,285.76136779785156,379.8182067871094,285.76136779785156,380.8182067871094,283.76136779785156,381.8182067871094,283.76136779785156,382.8182067871094,282.76136779785156,383.8182067871094,281.76136779785156,385.8182067871094,277.76136779785156,386.8182067871094,277.76136779785156,386.8182067871094,276.76136779785156,388.8182067871094,274.76136779785156,390.8182067871094,273.76136779785156,390.8182067871094,272.76136779785156,391.8182067871094,272.76136779785156,391.8182067871094,271.76136779785156,392.8182067871094,270.76136779785156,393.8182067871094,270.76136779785156,393.8182067871094,269.76136779785156,394.8182067871094,268.76136779785156,394.8182067871094,267.76136779785156,394.8182067871094,266.76136779785156,395.8182067871094,265.76136779785156,396.8182067871094,262.76136779785156,396.8182067871094,259.76136779785156,396.8182067871094,257.76136779785156,397.8182067871094,255.76136779785156,398.8182067871094,251.76136779785156,398.8182067871094,247.76136779785156,398.8182067871094,246.76136779785156,398.8182067871094,244.76136779785156,398.8182067871094,241.76136779785156,396.8182067871094,239.76136779785156,396.8182067871094,238.76136779785156,395.8182067871094,236.76136779785156,393.8182067871094,234.76136779785156,391.8182067871094,230.76136779785156,391.8182067871094,227.76136779785156,390.8182067871094,223.76136779785156,387.8182067871094,220.76136779785156,386.8182067871094,218.76136779785156,386.8182067871094,216.76136779785156,384.8182067871094,213.76136779785156,382.8182067871094,211.76136779785156,380.8182067871094,209.76136779785156,378.8182067871094,208.76136779785156,376.8182067871094,206.76136779785156,375.8182067871094,205.76136779785156,374.8182067871094,205.76136779785156,372.8182067871094,205.76136779785156,370.8182067871094,205.76136779785156,369.8182067871094,205.76136779785156,367.8182067871094,205.76136779785156,366.8182067871094,205.76136779785156,365.8182067871094,205.76136779785156,364.8182067871094,205.76136779785156,362.8182067871094,205.76136779785156,360.8182067871094,205.76136779785156,358.8182067871094,205.76136779785156,357.8182067871094,206.76136779785156,355.8182067871094,206.76136779785156,354.8182067871094,206.76136779785156,353.8182067871094,207.76136779785156,351.8182067871094,207.76136779785156,349.8182067871094,209.76136779785156,347.8182067871094,210.76136779785156,346.8182067871094,210.76136779785156,344.8182067871094,211.76136779785156,343.8182067871094,211.76136779785156,341.8182067871094,213.76136779785156,340.8182067871094,213.76136779785156,339.8182067871094,214.76136779785156,339.8182067871094,215.76136779785156,338.8182067871094,215.76136779785156,338.8182067871094,216.76136779785156,336.8182067871094,217.76136779785156,336.8182067871094,219.76136779785156,335.8182067871094,221.76136779785156,334.8182067871094,223.76136779785156,334.8182067871094,225.76136779785156,332.8182067871094,228.76136779785156,331.8182067871094,231.76136779785156,330.8182067871094,233.76136779785156,330.8182067871094,236.76136779785156,330.8182067871094,237.76136779785156,330.8182067871094,239.76136779785156,330.8182067871094,241.76136779785156,330.8182067871094,243.76136779785156,330.8182067871094,248.76136779785156,330.8182067871094,253.76136779785156,330.8182067871094,255.76136779785156,330.8182067871094,256.76136779785156,330.8182067871094,256.76136779785156,330.8182067871094,259.76136779785156,330.8182067871094,261.76136779785156,331.8182067871094,263.76136779785156,332.8182067871094,266.76136779785156,334.8182067871094,267.76136779785156,334.8182067871094,269.76136779785156,336.8182067871094,271.76136779785156,336.8182067871094,274.76136779785156,338.8182067871094,275.76136779785156,338.8182067871094,276.76136779785156,339.8182067871094,277.76136779785156,340.8182067871094,278.76136779785156,340.8182067871094,279.76136779785156,341.8182067871094,279.76136779785156,342.8182067871094,280.76136779785156,344.8182067871094,281.76136779785156,344.8182067871094,282.76136779785156,345.8182067871094,283.76136779785156,346.8182067871094,283.76136779785156,346.8182067871094,283.76136779785156,347.8182067871094,283.76136779785156,347.8182067871094,284.76136779785156,348.8182067871094,284.76136779785156,349.8182067871094,284.76136779785156,351.8182067871094,284.76136779785156,352.8182067871094,285.76136779785156,353.8182067871094,285.76136779785156,354.8182067871094,285.76136779785156,355.8182067871094,285.76136779785156]},{"points": [438.8182067871094,290.76136779785156,439.8182067871094,290.76136779785156,440.8182067871094,290.76136779785156,441.8182067871094,290.76136779785156,443.8182067871094,290.76136779785156,444.8182067871094,290.76136779785156,444.8182067871094,289.76136779785156,445.8182067871094,289.76136779785156,446.8182067871094,288.76136779785156,448.8182067871094,288.76136779785156,448.8182067871094,287.76136779785156,451.8182067871094,286.76136779785156,452.8182067871094,286.76136779785156,454.8182067871094,285.76136779785156,456.8182067871094,284.76136779785156,456.8182067871094,282.76136779785156,458.8182067871094,281.76136779785156,459.8182067871094,279.76136779785156,462.8182067871094,277.76136779785156,464.8182067871094,276.76136779785156,466.8182067871094,272.76136779785156,468.8182067871094,270.76136779785156,471.8182067871094,265.76136779785156,472.8182067871094,262.76136779785156,473.8182067871094,261.76136779785156,474.8182067871094,258.76136779785156,474.8182067871094,257.76136779785156,474.8182067871094,256.76136779785156,474.8182067871094,255.76136779785156,474.8182067871094,253.76136779785156,474.8182067871094,251.76136779785156,472.8182067871094,248.76136779785156,470.8182067871094,246.76136779785156,469.8182067871094,243.76136779785156,468.8182067871094,239.76136779785156,468.8182067871094,236.76136779785156,467.8182067871094,229.76136779785156,467.8182067871094,227.76136779785156,466.8182067871094,226.76136779785156,466.8182067871094,226.76136779785156,466.8182067871094,226.76136779785156,466.8182067871094,225.76136779785156,466.8182067871094,224.76136779785156,465.8182067871094,223.76136779785156,464.8182067871094,222.76136779785156,463.8182067871094,219.76136779785156,461.8182067871094,217.76136779785156,460.8182067871094,216.76136779785156,457.8182067871094,212.76136779785156,456.8182067871094,209.76136779785156,454.8182067871094,206.76136779785156,452.8182067871094,205.76136779785156,451.8182067871094,203.76136779785156,447.8182067871094,201.76136779785156,445.8182067871094,200.76136779785156,444.8182067871094,200.76136779785156,443.8182067871094,199.76136779785156,442.8182067871094,199.76136779785156,441.8182067871094,199.76136779785156,440.8182067871094,199.76136779785156,439.8182067871094,199.76136779785156,438.8182067871094,199.76136779785156,437.8182067871094,199.76136779785156,436.8182067871094,199.76136779785156,435.8182067871094,199.76136779785156,434.8182067871094,199.76136779785156,432.8182067871094,199.76136779785156,430.8182067871094,200.76136779785156,428.8182067871094,200.76136779785156,427.8182067871094,201.76136779785156,426.8182067871094,202.76136779785156,425.8182067871094,202.76136779785156,425.8182067871094,203.76136779785156,421.8182067871094,206.76136779785156,418.8182067871094,207.76136779785156,416.8182067871094,211.76136779785156,414.8182067871094,213.76136779785156,412.8182067871094,216.76136779785156,410.8182067871094,219.76136779785156,409.8182067871094,221.76136779785156,407.8182067871094,224.76136779785156,406.8182067871094,226.76136779785156,406.8182067871094,229.76136779785156,406.8182067871094,232.76136779785156,406.8182067871094,235.76136779785156,406.8182067871094,236.76136779785156,406.8182067871094,239.76136779785156,406.8182067871094,242.76136779785156,406.8182067871094,244.76136779785156,406.8182067871094,246.76136779785156,406.8182067871094,247.76136779785156,406.8182067871094,248.76136779785156,406.8182067871094,249.76136779785156,405.8182067871094,250.76136779785156,405.8182067871094,251.76136779785156,405.8182067871094,253.76136779785156,406.8182067871094,256.76136779785156,408.8182067871094,259.76136779785156,410.8182067871094,261.76136779785156,411.8182067871094,262.76136779785156,412.8182067871094,263.76136779785156,413.8182067871094,264.76136779785156,414.8182067871094,265.76136779785156,415.8182067871094,266.76136779785156,416.8182067871094,266.76136779785156,417.8182067871094,267.76136779785156,419.8182067871094,269.76136779785156,421.8182067871094,269.76136779785156,423.8182067871094,271.76136779785156,423.8182067871094,272.76136779785156,425.8182067871094,274.76136779785156,426.8182067871094,275.76136779785156,426.8182067871094,276.76136779785156,428.8182067871094,280.76136779785156,430.8182067871094,282.76136779785156,430.8182067871094,284.76136779785156,430.8182067871094,285.76136779785156,431.8182067871094,286.76136779785156,432.8182067871094,286.76136779785156,434.8182067871094,287.76136779785156,435.8182067871094,288.76136779785156,436.8182067871094,288.76136779785156,436.8182067871094,288.76136779785156]},{"points": [512.8182067871094,199.76136779785156,512.8182067871094,201.76136779785156,512.8182067871094,204.76136779785156,512.8182067871094,208.76136779785156,512.8182067871094,214.76136779785156,513.8182067871094,218.76136779785156,514.8182067871094,224.76136779785156,515.8182067871094,232.76136779785156,516.8182067871094,236.76136779785156,516.8182067871094,241.76136779785156,517.8182067871094,245.76136779785156,517.8182067871094,249.76136779785156,517.8182067871094,256.76136779785156,517.8182067871094,265.76136779785156,516.8182067871094,268.76136779785156,516.8182067871094,271.76136779785156,516.8182067871094,273.76136779785156,516.8182067871094,274.76136779785156,516.8182067871094,275.76136779785156,516.8182067871094,276.76136779785156,516.8182067871094,276.76136779785156,515.8182067871094,276.76136779785156,515.8182067871094,277.76136779785156,515.8182067871094,278.76136779785156,515.8182067871094,279.76136779785156,514.8182067871094,280.76136779785156,514.8182067871094,281.76136779785156,514.8182067871094,282.76136779785156,514.8182067871094,283.76136779785156,514.8182067871094,284.76136779785156,513.8182067871094,285.76136779785156,513.8182067871094,286.76136779785156,514.8182067871094,286.76136779785156,516.8182067871094,286.76136779785156,517.8182067871094,286.76136779785156,519.8182067871094,286.76136779785156,521.8182067871094,285.76136779785156,523.8182067871094,284.76136779785156,526.8182067871094,284.76136779785156,529.8182067871094,283.76136779785156,532.8182067871094,283.76136779785156,537.8182067871094,283.76136779785156,544.8182067871094,283.76136779785156,547.8182067871094,283.76136779785156,554.8182067871094,284.76136779785156,559.8182067871094,286.76136779785156,564.8182067871094,286.76136779785156,566.8182067871094,286.76136779785156,568.8182067871094,288.76136779785156,572.8182067871094,289.76136779785156,573.8182067871094,289.76136779785156,574.8182067871094,289.76136779785156]},{"points": [459.8182067871094,487.76136779785156,461.8182067871094,487.76136779785156,462.8182067871094,487.76136779785156,464.8182067871094,486.76136779785156,465.8182067871094,486.76136779785156,466.8182067871094,486.76136779785156,466.8182067871094,485.76136779785156,468.8182067871094,485.76136779785156,470.8182067871094,484.76136779785156,471.8182067871094,484.76136779785156,472.8182067871094,484.76136779785156,474.8182067871094,483.76136779785156,477.8182067871094,481.76136779785156,481.8182067871094,478.76136779785156,483.8182067871094,478.76136779785156,484.8182067871094,477.76136779785156,486.8182067871094,475.76136779785156,490.8182067871094,471.76136779785156,492.8182067871094,468.76136779785156,494.8182067871094,466.76136779785156,495.8182067871094,466.76136779785156,496.8182067871094,464.76136779785156,497.8182067871094,463.76136779785156,498.8182067871094,462.76136779785156,499.8182067871094,460.76136779785156,500.8182067871094,459.76136779785156,502.8182067871094,457.76136779785156,503.8182067871094,457.76136779785156,503.8182067871094,456.76136779785156,504.8182067871094,456.76136779785156,505.8182067871094,456.76136779785156,506.8182067871094,455.76136779785156,506.8182067871094,454.76136779785156,506.8182067871094,453.76136779785156,507.8182067871094,450.76136779785156,507.8182067871094,447.76136779785156,507.8182067871094,446.76136779785156,507.8182067871094,443.76136779785156,507.8182067871094,442.76136779785156,507.8182067871094,441.76136779785156,507.8182067871094,440.76136779785156,506.8182067871094,439.76136779785156,506.8182067871094,437.76136779785156,505.8182067871094,436.76136779785156,504.8182067871094,436.76136779785156,502.8182067871094,436.76136779785156,500.8182067871094,435.76136779785156,499.8182067871094,435.76136779785156,497.8182067871094,433.76136779785156,495.8182067871094,433.76136779785156,493.8182067871094,431.76136779785156,490.8182067871094,430.76136779785156,488.8182067871094,429.76136779785156,487.8182067871094,429.76136779785156,486.8182067871094,429.76136779785156,484.8182067871094,429.76136779785156,483.8182067871094,429.76136779785156,481.8182067871094,429.76136779785156,480.8182067871094,429.76136779785156,479.8182067871094,429.76136779785156,478.8182067871094,429.76136779785156,476.8182067871094,429.76136779785156,476.8182067871094,429.76136779785156,475.8182067871094,429.76136779785156,474.8182067871094,429.76136779785156,473.8182067871094,429.76136779785156,471.8182067871094,429.76136779785156,470.8182067871094,429.76136779785156,467.8182067871094,429.76136779785156,466.8182067871094,429.76136779785156,465.8182067871094,429.76136779785156,463.8182067871094,430.76136779785156,461.8182067871094,430.76136779785156,458.8182067871094,431.76136779785156,456.8182067871094,432.76136779785156,454.8182067871094,434.76136779785156,453.8182067871094,435.76136779785156,452.8182067871094,435.76136779785156,451.8182067871094,436.76136779785156,450.8182067871094,437.76136779785156,449.8182067871094,438.76136779785156,448.8182067871094,439.76136779785156,447.8182067871094,441.76136779785156,446.8182067871094,442.76136779785156,445.8182067871094,444.76136779785156,444.8182067871094,445.76136779785156,444.8182067871094,446.76136779785156,444.8182067871094,447.76136779785156,443.8182067871094,448.76136779785156,443.8182067871094,450.76136779785156,442.8182067871094,452.76136779785156,442.8182067871094,455.76136779785156,442.8182067871094,457.76136779785156,442.8182067871094,459.76136779785156,442.8182067871094,461.76136779785156,442.8182067871094,462.76136779785156,443.8182067871094,465.76136779785156,444.8182067871094,466.76136779785156,445.8182067871094,466.76136779785156,446.8182067871094,467.76136779785156,446.8182067871094,469.76136779785156,446.8182067871094,470.76136779785156,446.8182067871094,471.76136779785156,447.8182067871094,471.76136779785156,447.8182067871094,472.76136779785156,449.8182067871094,472.76136779785156,450.8182067871094,473.76136779785156,451.8182067871094,473.76136779785156,453.8182067871094,474.76136779785156,454.8182067871094,474.76136779785156,456.8182067871094,476.76136779785156,457.8182067871094,476.76136779785156,460.8182067871094,476.76136779785156,463.8182067871094,476.76136779785156,464.8182067871094,476.76136779785156,466.8182067871094,476.76136779785156]},{"points": [165.81820678710938,465.76136779785156,165.81820678710938,465.76136779785156,166.81820678710938,465.76136779785156,167.81820678710938,465.76136779785156,168.81820678710938,465.76136779785156,169.81820678710938,465.76136779785156,171.81820678710938,464.76136779785156,172.81820678710938,464.76136779785156,174.81820678710938,464.76136779785156,175.81820678710938,464.76136779785156,176.81820678710938,463.76136779785156,177.81820678710938,463.76136779785156,179.81820678710938,463.76136779785156,180.81820678710938,463.76136779785156,182.81820678710938,463.76136779785156,185.81820678710938,462.76136779785156,189.81820678710938,460.76136779785156,191.81820678710938,460.76136779785156,192.81820678710938,460.76136779785156,192.81820678710938,459.76136779785156,193.81820678710938,459.76136779785156,194.81820678710938,458.76136779785156,195.81820678710938,456.76136779785156,195.81820678710938,456.76136779785156,197.81820678710938,455.76136779785156,200.81820678710938,452.76136779785156,201.81820678710938,452.76136779785156,203.81820678710938,451.76136779785156,204.81820678710938,450.76136779785156,205.81820678710938,449.76136779785156,206.81820678710938,448.76136779785156,207.81820678710938,447.76136779785156,209.81820678710938,446.76136779785156,209.81820678710938,446.76136779785156,210.81820678710938,445.76136779785156,211.81820678710938,444.76136779785156,212.81820678710938,443.76136779785156,212.81820678710938,441.76136779785156,212.81820678710938,440.76136779785156,212.81820678710938,439.76136779785156,212.81820678710938,437.76136779785156,210.81820678710938,436.76136779785156,209.81820678710938,435.76136779785156,207.81820678710938,434.76136779785156,207.81820678710938,433.76136779785156,206.81820678710938,432.76136779785156,205.81820678710938,432.76136779785156,205.81820678710938,431.76136779785156,202.81820678710938,430.76136779785156,200.81820678710938,430.76136779785156,197.81820678710938,429.76136779785156,195.81820678710938,429.76136779785156,195.81820678710938,429.76136779785156,193.81820678710938,427.76136779785156,188.81820678710938,420.76136779785156,184.81820678710938,416.76136779785156,180.81820678710938,413.76136779785156,177.81820678710938,413.76136779785156,175.81820678710938,413.76136779785156,171.81820678710938,413.76136779785156,169.81820678710938,413.76136779785156,168.81820678710938,413.76136779785156,167.81820678710938,413.76136779785156,165.81820678710938,413.76136779785156,165.81820678710938,413.76136779785156,164.81820678710938,413.76136779785156,162.81820678710938,413.76136779785156,160.81820678710938,414.76136779785156,159.81820678710938,414.76136779785156,158.81820678710938,414.76136779785156,155.81820678710938,416.76136779785156,154.81820678710938,416.76136779785156,153.81820678710938,417.76136779785156,152.81820678710938,418.76136779785156,151.81820678710938,419.76136779785156,149.81820678710938,422.76136779785156,149.81820678710938,423.76136779785156,148.81820678710938,424.76136779785156,148.81820678710938,426.76136779785156,148.81820678710938,426.76136779785156,147.81820678710938,429.76136779785156,147.81820678710938,433.76136779785156,146.81820678710938,436.76136779785156,145.81820678710938,436.76136779785156,145.81820678710938,437.76136779785156,145.81820678710938,439.76136779785156,145.81820678710938,440.76136779785156,145.81820678710938,442.76136779785156,145.81820678710938,443.76136779785156,145.81820678710938,445.76136779785156,145.81820678710938,446.76136779785156,145.81820678710938,446.76136779785156,145.81820678710938,447.76136779785156,145.81820678710938,448.76136779785156,146.81820678710938,448.76136779785156,146.81820678710938,449.76136779785156,148.81820678710938,451.76136779785156,148.81820678710938,452.76136779785156,150.81820678710938,453.76136779785156,152.81820678710938,455.76136779785156,154.81820678710938,455.76136779785156,156.81820678710938,456.76136779785156,158.81820678710938,456.76136779785156,160.81820678710938,456.76136779785156,162.81820678710938,457.76136779785156,164.81820678710938,457.76136779785156,165.81820678710938,458.76136779785156,165.81820678710938,458.76136779785156,166.81820678710938,458.76136779785156,167.81820678710938,458.76136779785156,168.81820678710938,458.76136779785156,169.81820678710938,458.76136779785156]}]}
	
	enqueue = lambda data: r.rpush('queue:images', json.dumps(data))
	for _ in range(times):
		enqueue(pts)

def push_redis(queue_id,data):
	r.lpush('queue:predictions:' + queue_id, json.dumps(data))

def pop_redis(timeout=0):
	data = r.blpop(['queue:images'], timeout=timeout)
	if(not data):
		return None
	return json.loads(data[1])


def gen_img(pts):
	raw_strokes = []
	for i in range(len(pts)):
		pt = pts[i]['points']
		cur_x = []
		cur_y = []
		for x,y in zip(pt[::2],pt[1::2]):
			x = int(x * BASE_SIZE)
			y = int(y * BASE_SIZE)
			cur_x.append(x)
			cur_y.append(y)

		raw_strokes += [[cur_x,cur_y]]

	print(raw_strokes)

	img = np.zeros((BASE_SIZE, BASE_SIZE, 3), np.uint8)
	for t, stroke in enumerate(raw_strokes):
		points_count = len(stroke[0]) - 1
		if(points_count > 0):
			grad = 255//points_count
			for i in range(len(stroke[0]) - 1):
				_ = cv2.line(img, (stroke[0][i], stroke[1][i]), (stroke[0][i + 1], stroke[1][i + 1]), (255, 255 - min(t,10)*13, max(255 - grad*i, 20)), LW)
	# if SIZE != BASE_SIZE:
	# 	img = cv2.resize(img, (SIZE, SIZE))
	if(len(img.shape) == 3):
		img = np.expand_dims(img, 0)
	return img

def list_all_categories():
	# HardCoded because if a class changes the NN needs to be retrained
	return ['airplane', 'alarm_clock', 'ambulance', 'angel', 'animal_migration', 'ant', 'anvil', 'apple', 'arm', 'asparagus', 'axe', 'backpack', 'banana', 'bandage', 'barn', 'baseball', 'baseball_bat', 'basket', 'basketball', 'bat', 'bathtub', 'beach', 'bear', 'beard', 'bed', 'bee', 'belt', 'bench', 'bicycle', 'binoculars', 'bird', 'birthday_cake', 'blackberry', 'blueberry', 'book', 'boomerang', 'bottlecap', 'bowtie', 'bracelet', 'brain', 'bread', 'bridge', 'broccoli', 'broom', 'bucket', 'bulldozer', 'bus', 'bush', 'butterfly', 'cactus', 'cake', 'calculator', 'calendar', 'camel', 'camera', 'camouflage', 'campfire', 'candle', 'cannon', 'canoe', 'car', 'carrot', 'castle', 'cat', 'ceiling_fan', 'cell_phone', 'cello', 'chair', 'chandelier', 'church', 'circle', 'clarinet', 'clock', 'cloud', 'coffee_cup', 'compass', 'computer', 'cookie', 'cooler', 'couch', 'cow', 'crab', 'crayon', 'crocodile', 'crown', 'cruise_ship', 'cup', 'diamond', 'dishwasher', 'diving_board', 'dog', 'dolphin', 'donut', 'door', 'dragon', 'dresser', 'drill', 'drums', 'duck', 'dumbbell', 'ear', 'elbow', 'elephant', 'envelope', 'eraser', 'eye', 'eyeglasses', 'face', 'fan', 'feather', 'fence', 'finger', 'fire_hydrant', 'fireplace', 'firetruck', 'fish', 'flamingo', 'flashlight', 'flip_flops', 'floor_lamp', 'flower', 'flying_saucer', 'foot', 'fork', 'frog', 'frying_pan', 'garden', 'garden_hose', 'giraffe', 'goatee', 'golf_club', 'grapes', 'grass', 'guitar', 'hamburger', 'hammer', 'hand', 'harp', 'hat', 'headphones', 'hedgehog', 'helicopter', 'helmet', 'hexagon', 'hockey_puck', 'hockey_stick', 'horse', 'hospital', 'hot_air_balloon', 'hot_dog', 'hot_tub', 'hourglass', 'house', 'house_plant', 'hurricane', 'ice_cream', 'jacket', 'jail', 'kangaroo', 'key', 'keyboard', 'knee', 'ladder', 'lantern', 'laptop', 'leaf', 'leg', 'light_bulb', 'lighthouse', 'lightning', 'line', 'lion', 'lipstick', 'lobster', 'lollipop', 'mailbox', 'map', 'marker', 'matches', 'megaphone', 'mermaid', 'microphone', 'microwave', 'monkey', 'moon', 'mosquito', 'motorbike', 'mountain', 'mouse', 'moustache', 'mouth', 'mug', 'mushroom', 'nail', 'necklace', 'nose', 'ocean', 'octagon', 'octopus', 'onion', 'oven', 'owl', 'paint_can', 'paintbrush', 'palm_tree', 'panda', 'pants', 'paper_clip', 'parachute', 'parrot', 'passport', 'peanut', 'pear', 'peas', 'pencil', 'penguin', 'piano', 'pickup_truck', 'picture_frame', 'pig', 'pillow', 'pineapple', 'pizza', 'pliers', 'police_car', 'pond', 'pool', 'popsicle', 'postcard', 'potato', 'power_outlet', 'purse', 'rabbit', 'raccoon', 'radio', 'rain', 'rainbow', 'rake', 'remote_control', 'rhinoceros', 'river', 'roller_coaster', 'rollerskates', 'sailboat', 'sandwich', 'saw', 'saxophone', 'school_bus', 'scissors', 'scorpion', 'screwdriver', 'sea_turtle', 'see_saw', 'shark', 'sheep', 'shoe', 'shorts', 'shovel', 'sink', 'skateboard', 'skull', 'skyscraper', 'sleeping_bag', 'smiley_face', 'snail', 'snake', 'snorkel', 'snowflake', 'snowman', 'soccer_ball', 'sock', 'speedboat', 'spider', 'spoon', 'spreadsheet', 'square', 'squiggle', 'squirrel', 'stairs', 'star', 'steak', 'stereo', 'stethoscope', 'stitches', 'stop_sign', 'stove', 'strawberry', 'streetlight', 'string_bean', 'submarine', 'suitcase', 'sun', 'swan', 'sweater', 'swing_set', 'sword', 't-shirt', 'table', 'teapot', 'teddy-bear', 'telephone', 'television', 'tennis_racquet', 'tent', 'the_eiffel_tower', 'the_great_wall_of_china', 'the_mona_lisa', 'tiger', 'toaster', 'toe', 'toilet', 'tooth', 'toothbrush', 'toothpaste', 'tornado', 'tractor', 'traffic_light', 'train', 'tree', 'triangle', 'trombone', 'truck', 'trumpet', 'umbrella', 'underwear', 'van', 'vase', 'violin', 'washing_machine', 'watermelon', 'waterslide', 'whale', 'wheel', 'windmill', 'wine_bottle', 'wine_glass', 'wristwatch', 'yoga', 'zebra', 'zigzag']

def preds2catids(predictions):
	return np.argsort(-predictions, axis=1)[:, :3][0]

def top_3_accuracy(y_true, y_pred):
	return keras.metrics.top_k_categorical_accuracy(y_true, y_pred, k=3)

def prepare_nn():
	model = load_model('./Rete/mobileNet.hdf5', custom_objects = {'top_3_accuracy':top_3_accuracy})	

	return model

def main():

	# CARICO IMMAGINI/E PEZZOTTE/A PER TESTARE
	#load(5)

	# data = {
	# "id": 5,
	# "top1" : "top",
	# "top2" : "top",
	# "top3" : "top"
	# }
	# push_redis(data)

	# return

	model = prepare_nn()
	t1 = time.time()
	while True:
		t2 = time.time()
		print(f"tempo = {t2-t1}")
		t1 = t2
		try:
			data = pop_redis(0)
			if not data:
				print("Ho preso er muro fratell")
				return
		except Exception:
			print("Errore durante l'interfacciamento con redis")
			raise

		identifier = data["id"]
		queue_id = data["queue_id"]
		data_pts = data["payload"]
		# identifier = 0
		# data_pts = data

		print(f"{identifier=}")
		print(f"{queue_id=}")

		img = gen_img(data_pts)

		# plt.figure()
		# plt.imshow(img[0])
		# plt.show()
		print("K")
		preds = model.predict(img)
		print("K")

		cats = list_all_categories()
		id2cat = {k: cat.replace(' ', '_') for k, cat in enumerate(cats)}
		top3 = preds2catids(preds)
		#top3cats = top3.replace(id2cat)

		top3cats = np.asarray([id2cat[x] for x in top3])

		response = {
			"id": identifier,
			"top1": top3cats[0],
			"top2": top3cats[1],
			"top3": top3cats[2]
		}

		print(response)

		push_redis(queue_id, response) 


if __name__ == '__main__':
	main()



'''
img = Image(pop_redis())

img.convert()

model.predict(img.data())
'''